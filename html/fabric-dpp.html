<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Zero@Production — Kumaş Üretimi</title>
    <link rel="stylesheet" href="assets/css/theme.css" />
    <link rel="stylesheet" href="assets/css/zae-theme.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script defer src="assets/js/main.js"></script>
    <script defer src="assets/js/inject-backlink.js"></script>
    <script defer src="assets/js/agent.js"></script>
    <script defer src="assets/js/agent-ui.js"></script>
    <script defer src="assets/js/trend.js"></script>
    <script defer src="assets/js/filterbar.js"></script>
    <script type="module" defer src="assets/js/module-fabric.js"></script>
  </head>
  <body>
    <header class="app-header">
      <div class="brand">
    <img src="images/zaplogo.png" alt="Zero@Production Logo" />
        <div class="title">Zero@Production — Kumaş Üretimi</div>
      </div>
  <a class="btn back-to-dashboard" href="ZeroatproductionDPP.html">Dashboard’a Dön</a>
    </header>
    <main class="container">
      <div class="card" style="margin-bottom: 24px;">
        <div class="row" style="justify-content: space-between; align-items: center;">
          <div>
            <h3>Fabric — Total CO₂ and Cost</h3>
            <p class="muted">Üretim domaininden Kumaş metrikleri</p>
          </div>
          <div class="row" style="gap:8px; align-items:center;">
            <label for="fabricTimeframe" class="muted">Period:</label>
            <select id="fabricTimeframe" class="btn" style="background: rgba(255,255,255,0.1); min-width:120px;"></select>
            <span id="fabricActiveFilter" class="muted" style="margin-left:16px;">Filtre: —</span>
            <button id="fabricClearFilter" class="btn" style="margin-left:8px;">Filtreyi Temizle</button>
          </div>
        </div>
        <div class="row" style="gap:32px; align-items:flex-start;">
          <div class="card" style="min-width:260px;">
            <h3 id="fabricTotalCo2">—</h3>
            <p class="muted">Total CO₂</p>
          </div>
          <div class="card" style="min-width:260px;">
            <h3 id="fabricTotalCost">—</h3>
            <p class="muted">Tahmini Maliyet (K)</p>
          </div>
        </div>
      </div>

      <section class="card" style="margin-bottom: 24px;">
        <h3>Trend</h3>
        <div id="fabricTrendSummary" class="muted skeleton skeleton-text">—</div>
        <div id="fabricTrendCostSummary" class="muted skeleton skeleton-text">—</div>
      </section>

      <section class="card" style="margin-bottom: 24px;">
        <h3>Kumaş CO₂ (Modüller)</h3>
        <canvas id="fabricChart" height="120"></canvas>
      </section>

      <section class="card">
        <h3>Kumaş Modül Tablosu</h3>
        <p class="muted">CO₂ ve maliyet (K) — zaman aralığına göre ölçekli</p>
        <table class="table-hover" style="width:100%; border-collapse: collapse;">
          <thead>
            <tr>
              <th style="text-align:left; padding:8px;">Modül</th>
              <th style="text-align:left; padding:8px;">Alan</th>
              <th style="text-align:left; padding:8px;">CO₂</th>
              <th style="text-align:left; padding:8px;">Maliyet</th>
              <th style="text-align:left; padding:8px;">Durum</th>
            </tr>
          </thead>
          <tbody id="fabricTbody"></tbody>
        </table>
      </section>
    </main>
    <!-- Tutarlı Grafikler Bölümü (ZaE Tema) -->
    <section class="card" style="margin: 24px;">
      <h3>Grafikler</h3>
      <div class="row" style="gap:16px; flex-wrap:wrap;">
        <div class="card" style="min-width:280px; flex:1;">
          <h4>Alanlara Göre Dağılım</h4>
          <canvas id="chartDomain" height="140"></canvas>
        </div>
        <div class="card" style="min-width:280px; flex:1;">
          <h4>Scope 1/2/3</h4>
          <canvas id="chartScope" height="140"></canvas>
        </div>
        <div class="card" style="min-width:280px; flex:1;">
          <h4>CO₂ Trend (Aylık)</h4>
          <canvas id="chartTrend" height="140"></canvas>
        </div>
        <div class="card" style="min-width:280px; flex:1;">
          <h4>CO₂ vs Maliyet</h4>
          <canvas id="chartCompare" height="140"></canvas>
        </div>
      </div>
    </section>
    <script>
      (function(){
        if(!window.Chart) return;
        try {
          var ctxDomain = document.getElementById('chartDomain');
          if (ctxDomain) {
            new Chart(ctxDomain, {
              type: 'pie',
              data: {
                labels: ['Üretim', 'Enerji', 'Lojistik'],
                datasets: [{ data: [55, 30, 15], backgroundColor: ['#005530','#FFC107','#02154e'] }]
              },
              options: { plugins: { legend: { position: 'bottom' } } }
            });
          }
          var ctxScope = document.getElementById('chartScope');
          if (ctxScope) {
            new Chart(ctxScope, {
              type: 'bar',
              data: {
                labels: ['Scope 1','Scope 2','Scope 3'],
                datasets: [{ label: 'tCO₂', data: [4.1, 7.8, 16.4], backgroundColor: ['#005530','#FFC107','#02154e'] }]
              },
              options: { responsive: true, scales: { y: { beginAtZero: true } } }
            });
          }
          var ctxTrend = document.getElementById('chartTrend');
          if (ctxTrend) {
            new Chart(ctxTrend, {
              type: 'line',
              data: {
                labels: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
                datasets: [{ label: 'CO₂ (t)', data: [25,26,27,26,28,29,28,27,26,25,25,26], borderColor: '#005530', backgroundColor: 'rgba(0,85,48,0.15)', tension: 0.25 }]
              },
              options: { plugins: { legend: { display: true } }, scales: { y: { beginAtZero: false } } }
            });
          }
          var ctxCompare = document.getElementById('chartCompare');
          if (ctxCompare) {
            new Chart(ctxCompare, {
              type: 'bar',
              data: {
                labels: ['Fabric'],
                datasets: [
                  { label: 'CO₂ (t)', data: [29.4], backgroundColor: '#005530' },
                  { label: 'Maliyet (K€)', data: [120], backgroundColor: '#FFC107' }
                ]
              },
              options: { responsive: true, scales: { y: { beginAtZero: true } } }
            });
          }
        } catch(e) {}
      })();
    </script>
  </body>
 </html>